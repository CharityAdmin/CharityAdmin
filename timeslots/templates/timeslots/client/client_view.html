{% extends "base.html" %}

{% load display_helpers %}

{% block content %}
	<h3>{{ client }}</h3>

	{% if user.is_staff %}
		<a class="edit-link" href="{% url 'timeslots_client_edit' client.user.id %}">Edit Client</a>
		<a class="add-link" href="{% url 'timeslots_opening_add' client.user.id %}">Add Client Opening</a>
	{% endif %}

	{% display_address client %}

	<h4>Display Dates: </h4>
	{% include "timeslots/partials/datepicker.html" %}
	<br><br>

	{% if commitments %}
		<div class="block">
			<h4>Scheduled Visits for You and {{ client }}</h4>
			<ul class="well">
				{% for instance in commitments %}
					{% include "timeslots/partials/commitment_instance_row.html" with specify_client=False %}
				{% endfor %}
			</ul>
		</div>
	{% endif %}

	<div class="block">
		<h4>Openings</h4>
		<ul class="well">
			{% for instance in openings %}
				{% include "timeslots/partials/opening_instance_row.html" with show_status_label=True %}
			{% endfor %}
		</ul>
	</div>

	<div class="block">
		<h4>Opening Patterns</h4>
		<ul class="well">
			{% for pattern in client.openings.all %}
				{% include "timeslots/partials/opening_pattern_row.html" with show_status_label=True %}
			{% endfor %}
		</ul>
	</div>

	<div class="block">
		<h4>Teammates for {{ client }}</h4>
		<ul class="well">
			{% for teammate in team %}
				<li>
					<div>
						{{ teammate }}
						<a href="mailto:{{ teammate.user.email }}">{{ teammate.user.email }}</a>
						<span class="comment">Maybe we want to show each teammates pattern(s) here?</span>
					</div>
				</li>
			{% endfor %}
		</ul>
	</div>

{% endblock %}